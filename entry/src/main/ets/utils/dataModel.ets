import { upload_local } from './tool';

export interface comment_obj{
  comment_avatar:string
  comment_nickname:string
  comment_content: string
  comment_time: number
}

export interface personal_data {
  wx_number: string;
  data: personal_detail_data
}

export interface personal_detail_data {
  avatar: string;
  nickname: string
  district: string;
  pyq_first4_pic: string[]
  pyq_data: personal_every_year_pyq_data[]
  bg?: string;
}

export interface personal_every_year_pyq_data {
  year: number;
  pyq_data_list: pyq_data[]
}

export interface pyq_data {
  content: string;
  gallery: string[];
  location: string;
  love_num: number;
  comment_num: number;
  comment_content?: comment_obj[]
  show_time: string;
  share_time: number;
  link?: string;
  link_image_url?: string;
}



export function convertTime(timestamp: number) {
  // è·å–å½“å‰çš„æ—¶é—´æˆ³
  const currentTimestamp = new Date().getTime();
  const timeDifference = (currentTimestamp - timestamp) / 1000; // è½¬æ¢ä¸ºç§’

  if (timeDifference < 5 || timeDifference == 0) {
    return "åˆšåˆš";
  } else if (timeDifference < 60) {
    return `${Math.floor(timeDifference)}ç§’å‰`;
  } else if (timeDifference < 3600) {
    return `${Math.floor(timeDifference / 60)}åˆ†é’Ÿå‰`;
  } else if (timeDifference < 86400) {
    return `${Math.floor(timeDifference / 3600)}å°æ—¶å‰`;
  } else if (timeDifference < 604800) {
    return `${Math.floor(timeDifference / 86400)}å¤©å‰`;
  } else if (timeDifference < 2592000) {
    return `${Math.floor(timeDifference / 604800)}å‘¨å‰`;
  } else if (timeDifference < 31536000) {
    return `${Math.floor(timeDifference / 2592000)}ä¸ªæœˆå‰`;
  } else {
    return `${Math.floor(timeDifference / 31536000)}å¹´å‰`;
  }
}

export function fake_data(context: Context | undefined) {
  let pyq_first4_pic_list: string[] = []
  let personal_every_year_pyq_data_list: personal_every_year_pyq_data[] = []
  let avater_url: string = 'test_avater.jpg'
  let bg: string = 'pyq_bg.jpg'

  const person_avater = upload_local(avater_url, context)
  const person_pyq_bg = upload_local(bg, context)


  let pyq_data2024: pyq_data[] = [
    {
      content: '#2024ğŸ”š\n\nå¿™ç¢Œåˆå……å®çš„ä¸€å¹´ï¼Œå–œä¹ä¸æ„Ÿæ©çš„ä¸€å¹´\næ„Ÿæ©é‡åˆ°çš„äººï¼Œç»å†çš„äº‹ï¼Œå­¦åˆ°çš„æ‰€æœ‰å’Œå—åˆ°çš„æ”¯æŒã€‚ç°åœ¨å›æƒ³å¹´åˆçš„ç›®æ ‡ä¹Ÿåœ¨ç¥‚çš„å¸¦é¢†ä¸‹ä¸çŸ¥ä¸è§‰çš„å®Œæˆäº†\n\nè°¢è°¢ä»Šå¹´å‡ºç°åœ¨æˆ‘èº«è¾¹çš„ä¸€åˆ‡ï¼Œå› ä¸ºä½ ä»¬æˆ‘ç°åœ¨ä»ç„¶æ˜¯ä¸ªå¼€æœ—çš„å°å¥³å­©ğŸ¥°',
      gallery: [person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater],
      location: 'æƒ å·å¸‚Â·æƒ å·å¥¥æ—åŒ¹å…‹ä½“è‚²åœº',
      love_num: 38,
      comment_num: 4,
      comment_content:[
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        }
      ],
      show_time: convertTime(new Date('2024-10-29').getTime()),
      share_time: new Date('2024-10-29').getTime(),
    },
    {
      content: 'æ„Ÿæ©é‡åˆ°çš„äººï¼Œç»å†çš„äº‹ï¼Œå­¦åˆ°çš„æ‰€æœ‰å’Œå—åˆ°çš„æ”¯æŒã€‚ç°åœ¨å›æƒ³å¹´åˆçš„ç›®æ ‡ä¹Ÿåœ¨ç¥‚çš„å¸¦é¢†ä¸‹ä¸çŸ¥ä¸è§‰çš„å®Œæˆäº†\n\nè°¢è°¢ä»Šå¹´å‡ºç°åœ¨æˆ‘èº«è¾¹çš„ä¸€åˆ‡ï¼Œå› ä¸ºä½ ä»¬æˆ‘ç°åœ¨ä»ç„¶æ˜¯ä¸ªå¼€æœ—çš„å°å¥³å­©ğŸ¥°',
      gallery: [person_avater,
        person_avater],
      location: 'æ±Ÿé—¨å¸‚Â·äº”é‚‘å¤§å­¦',
      love_num: 55,
      comment_num: 4,
      comment_content:[
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2024-10-29').getTime()
        }
      ],
      show_time: convertTime(new Date('2024-12-10').getTime()),
      share_time: new Date('2024-12-10').getTime(),
    },
  ]
  let pyq_data2023: pyq_data[] = [
    {
      content: '#2023ğŸ”š\n\nå¿™ç¢Œåˆå……å®çš„ä¸€å¹´ï¼Œå–œä¹ä¸æ„Ÿæ©çš„ä¸€å¹´\næ„Ÿæ©é‡åˆ°çš„äººï¼Œç»å†çš„äº‹ï¼Œå­¦åˆ°çš„æ‰€æœ‰å’Œå—åˆ°çš„æ”¯æŒã€‚ç°åœ¨å›æƒ³å¹´åˆçš„ç›®æ ‡ä¹Ÿåœ¨ç¥‚çš„å¸¦é¢†ä¸‹ä¸çŸ¥ä¸è§‰çš„å®Œæˆäº†\n\nè°¢è°¢ä»Šå¹´å‡ºç°åœ¨æˆ‘èº«è¾¹çš„ä¸€åˆ‡ï¼Œå› ä¸ºä½ ä»¬æˆ‘ç°åœ¨ä»ç„¶æ˜¯ä¸ªå¼€æœ—çš„å°å¥³å­©ğŸ¥°',
      gallery: [person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater],
      location: 'æƒ å·å¸‚Â·æƒ å·å¥¥æ—åŒ¹å…‹ä½“è‚²åœº',
      love_num: 25,
      comment_num: 4,
      comment_content:[
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        }
      ],
      show_time: convertTime(new Date('2023-8-29').getTime()),
      share_time: new Date('2023-8-29').getTime(),
    },
    {
      content: 'æ„Ÿæ©é‡åˆ°çš„äººï¼Œç»å†çš„äº‹ï¼Œå­¦åˆ°çš„æ‰€æœ‰å’Œå—åˆ°çš„æ”¯æŒã€‚ç°åœ¨å›æƒ³å¹´åˆçš„ç›®æ ‡ä¹Ÿåœ¨ç¥‚çš„å¸¦é¢†ä¸‹ä¸çŸ¥ä¸è§‰çš„å®Œæˆäº†\n\nè°¢è°¢ä»Šå¹´å‡ºç°åœ¨æˆ‘èº«è¾¹çš„ä¸€åˆ‡ï¼Œå› ä¸ºä½ ä»¬æˆ‘ç°åœ¨ä»ç„¶æ˜¯ä¸ªå¼€æœ—çš„å°å¥³å­©ğŸ¥°',
      gallery: [],
      location: 'æ±Ÿé—¨å¸‚Â·äº”é‚‘å¤§å­¦',
      love_num: 2,
      comment_num: 4,
      comment_content:[
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2023-10-29').getTime()
        }
      ],
      show_time: convertTime(new Date('2023-11-9').getTime()),
      share_time: new Date('2023-11-9').getTime(),
    },
  ]
  let pyq_data2022: pyq_data[] = [
    {
      content: '#2022ğŸ”š\n\nå¿™ç¢Œåˆå……å®çš„ä¸€å¹´ï¼Œå–œä¹ä¸æ„Ÿæ©çš„ä¸€å¹´\næ„Ÿæ©é‡åˆ°çš„äººï¼Œç»å†çš„äº‹ï¼Œå­¦åˆ°çš„æ‰€æœ‰å’Œå—åˆ°çš„æ”¯æŒã€‚ç°åœ¨å›æƒ³å¹´åˆçš„ç›®æ ‡ä¹Ÿåœ¨ç¥‚çš„å¸¦é¢†ä¸‹ä¸çŸ¥ä¸è§‰çš„å®Œæˆäº†\n\nè°¢è°¢ä»Šå¹´å‡ºç°åœ¨æˆ‘èº«è¾¹çš„ä¸€åˆ‡ï¼Œå› ä¸ºä½ ä»¬æˆ‘ç°åœ¨ä»ç„¶æ˜¯ä¸ªå¼€æœ—çš„å°å¥³å­©ğŸ¥°',
      gallery: [person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater,
        person_avater],
      location: 'æƒ å·å¸‚Â·æƒ å·å¥¥æ—åŒ¹å…‹ä½“è‚²åœº',
      love_num: 10,
      comment_num: 9,
      comment_content:[
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        }
      ],
      show_time: convertTime(new Date('2022-4-29').getTime()),
      share_time: new Date('2022-4-29').getTime(),
    },
    {
      content: 'æ„Ÿæ©é‡åˆ°çš„äººï¼Œç»å†çš„äº‹ï¼Œå­¦åˆ°çš„æ‰€æœ‰å’Œå—åˆ°çš„æ”¯æŒã€‚ç°åœ¨å›æƒ³å¹´åˆçš„ç›®æ ‡ä¹Ÿåœ¨ç¥‚çš„å¸¦é¢†ä¸‹ä¸çŸ¥ä¸è§‰çš„å®Œæˆäº†\n\nè°¢è°¢ä»Šå¹´å‡ºç°åœ¨æˆ‘èº«è¾¹çš„ä¸€åˆ‡ï¼Œå› ä¸ºä½ ä»¬æˆ‘ç°åœ¨ä»ç„¶æ˜¯ä¸ªå¼€æœ—çš„å°å¥³å­©ğŸ¥°',
      gallery: [person_avater,
        person_avater],
      location: 'æ±Ÿé—¨å¸‚Â·äº”é‚‘å¤§å­¦',
      love_num: 40,
      comment_num: 7,
      comment_content:[
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        },
        {
          comment_avatar:person_avater,
          comment_nickname:'è èå¹é›ª',
          comment_content: 'çœŸä¸é”™å•Š',
          comment_time: new Date('2022-10-29').getTime()
        }
      ],
      show_time: convertTime(new Date('2022-5-9').getTime()),
      share_time: new Date('2022-5-9').getTime(),
    }
  ]

  let pyq_data_list: pyq_data[][] = [pyq_data2023, pyq_data2024, pyq_data2022]


  for (let m: number = 0; m < pyq_data_list.length; m++) {

    let data_list: pyq_data[] = [];

    for (let n: number = 0; n < pyq_data_list[m].length; n++) {

      data_list.push(pyq_data_list[m][n])

      if (pyq_data_list[m][n].gallery!.length > 0) {
        pyq_first4_pic_list.push(...pyq_data_list[m][n].gallery)
      }
    }
    let personal_every_year_pyq_data: personal_every_year_pyq_data = {
      year: new Date(pyq_data_list[m][0].share_time).getFullYear(),
      pyq_data_list: data_list
    }
    personal_every_year_pyq_data_list.push(personal_every_year_pyq_data)

  }

  let personal_detail_data: personal_detail_data = {
    avatar: person_avater,
    nickname: 'è èå¹é›ª',
    district: 'å¹¿ä¸œ æƒ å·',
    pyq_first4_pic: pyq_first4_pic_list,
    pyq_data: personal_every_year_pyq_data_list,
    bg: person_pyq_bg
  }

  let personal_data: personal_data = {
    wx_number: 'cay2015999',
    data: personal_detail_data
  }

  let personal_data_list: personal_data[] = []
  personal_data_list.push(personal_data)

  return personal_data_list
}


export function fake_all_data(context: Context | undefined) {
  let avater_url: string = 'hejtea14rimy.jpg'
  let pyq_first4_pic_list: string[] = ['hejtea14rimy_pyq1.jpg', 'hejtea14rimy_pyq2.jpg',
    'hejtea14rimy_pyq3.jpg', 'hejtea14rimy_pyq4.jpg']
  let new_pyq_first4_pic_list: string[] = []


  const person_avater = upload_local(avater_url, context)

  for (let index = 0; index < pyq_first4_pic_list.length; index++) {
    const element = upload_local(pyq_first4_pic_list[index], context);
    new_pyq_first4_pic_list.push(element)
  }
  let gallery_list: string[] = [new_pyq_first4_pic_list[0], new_pyq_first4_pic_list[1]]


  let friends_data: personal_data = {
    wx_number: 'hejtea14rimy',
    data: {
      avatar: person_avater,
      nickname: 'è€ƒæ‹‰ä¾‹å¤–',
      district: 'å†°å²›',
      pyq_first4_pic: new_pyq_first4_pic_list,
      pyq_data: [{
        year: 2025,
        pyq_data_list: [{
          content: 'æ¡¥ä¸Šæœ‰åªçŒ«',
          gallery: gallery_list,
          location: '',
          love_num: 0,
          comment_num: 1,
          comment_content:[
            {
              comment_avatar:person_avater,
              comment_nickname:'è èå¹é›ª',
              comment_content: 'çœŸä¸é”™å•Š',
              comment_time: new Date('2024-10-29').getTime()
            }
          ],
          show_time: convertTime(new Date('2025-1-8 18:47').getTime()),
          share_time: new Date('2025-1-8 18:47').getTime(),
        }]
      }]
    }
  }

  return friends_data
}

@Preview
@Component
struct dddd {
  aboutToAppear(): void {
  }

  build() {

  }
}

